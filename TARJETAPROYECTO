CREATE TABLE TARJETA(
ID_TARJETA INTEGER,
NOMBRE VARCHAR2(120),
DIACORTE INTEGER,
CONSTRAINT PK_ID_TARJETA PRIMARY KEY (ID_TARJETA));

CREATE SEQUENCE SEC_TARJETA
START WITH 1
INCREMENT BY 1
NOMAXVALUE;

CREATE TABLE GASTOS(
ID_GASTOS INTEGER,
ID_TARJETA INTEGER,
CONCEPTO VARCHAR2(500),
CANTIDAD FLOAT,
FECHA DATE,
CONSTRAINT PK_ID_GASTOS PRIMARY KEY (ID_GASTOS),
CONSTRAINT FK_ID_TARJETA FOREIGN KEY (ID_TARJETA) REFERENCES TARJETA (ID_TARJETA));

CREATE SEQUENCE SEC_GASTOS
START WITH 1
INCREMENT BY 1
NOMAXVALUE;

CREATE OR REPLACE PROCEDURE GUARDAR_TARJETA
(MY_ID_TARJETA OUT INTEGER,
MY_NOMBRE IN VARCHAR2,
MY_DIACORTE IN INTEGER)
AS
BEGIN
SELECT SEC_TARJETA.NEXTVAL INTO MY_ID_TARJETA FROM DUAL;
INSERT INTO TARJETA VALUES
(MY_ID_TARJETA,
MY_NOMBRE,
MY_DIACORTE);
END;
/

CREATE OR REPLACE PROCEDURE GUARDAR_GASTOS
(MY_ID_GASTOS OUT INTEGER,
MY_ID_TARJETA OUT INTEGER,
MY_CONCEPTO IN VARCHAR2,
MY_CANTIDAD IN FLOAT,
MY_FECHA IN DATE)
AS
BEGIN
SELECT SEC_GASTOS.NEXTVAL INTO MY_ID_GASTOS FROM DUAL;
INSERT INTO GASTOS VALUES
(MY_ID_GASTOS,
MY_ID_TARJETA,
MY_CONCEPTO,
MY_CANTIDAD,
MY_FECHA);
END;
/
